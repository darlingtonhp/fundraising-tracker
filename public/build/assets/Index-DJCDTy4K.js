import{r as d,W as A,j as e,a as q,d as z}from"./app-Bp2RtXpQ.js";import{A as G}from"./AuthenticatedLayout-DuNq7-2H.js";import{T as h,I as g}from"./TextInput-DjZIdFdo.js";import{I as n}from"./InputLabel-CkJUODWM.js";import"./transition-BWKuXZR1.js";function X({auth:I,mitupos:c}){const[T,p]=d.useState(null),[W,u]=d.useState(!1),[a,w]=d.useState(""),[x,b]=d.useState("name"),[m,j]=d.useState("asc"),[r,k]=d.useState("all"),{data:C,setData:D,post:$,errors:S,reset:F}=A({name:"",description:""}),{data:_,setData:y,put:P,errors:E,reset:L}=A({name:"",description:""}),v=d.useMemo(()=>{let t=c.filter(s=>{const l=s.name.toLowerCase().includes(a.toLowerCase())||s.description&&s.description.toLowerCase().includes(a.toLowerCase()),i=r==="all"||r==="with"&&s.description||r==="without"&&!s.description;return l&&i});return t.sort((s,l)=>{let i,o;switch(x){case"name":i=s.name.toLowerCase(),o=l.name.toLowerCase();break;case"description":i=s.description?s.description.toLowerCase():"",o=l.description?l.description.toLowerCase():"";break;case"created_at":i=new Date(s.created_at),o=new Date(l.created_at);break;default:i=s.name.toLowerCase(),o=l.name.toLowerCase()}return i<o?m==="asc"?-1:1:i>o?m==="asc"?1:-1:0}),t},[c,a,x,m,r]),V=t=>{t.preventDefault(),$(route("mitupos.store"),{onSuccess:()=>{F(),u(!1)}})},B=(t,s)=>{t.preventDefault(),P(route("mitupos.update",s.id),{onSuccess:()=>{p(null),L()}})},R=t=>{p(t.id),y({name:t.name,description:t.description||""})},U=()=>{p(null),L()},Y=()=>{u(!1),F()},N=t=>{x===t?j(m==="asc"?"desc":"asc"):(b(t),j("asc"))},M=()=>{w(""),k("all"),b("name"),j("asc")},f=({field:t})=>x!==t?null:e.jsx("span",{className:"ml-1",children:m==="asc"?"â†‘":"â†“"});return e.jsxs(G,{user:I.user,header:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight",children:"Mitupo/Totems"}),e.jsx("button",{onClick:()=>u(!0),className:"bg-emerald-500 px-3 py-2 text-white rounded shadow transition-all hover:bg-emerald-600 text-sm font-medium",children:"Add New Mutupo"})]}),children:[e.jsx(q,{title:"Mitupo"}),e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[W&&e.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg mb-6",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-gray-100",children:"Add New Mutupo"}),e.jsxs("form",{onSubmit:V,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"create_name",value:"Mutupo Name *"}),e.jsx(h,{id:"create_name",type:"text",value:C.name,className:"mt-1 block w-full",onChange:t=>D("name",t.target.value),placeholder:"Enter mutupo name"}),e.jsx(g,{message:S.name,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"create_description",value:"Description"}),e.jsx(h,{id:"create_description",type:"text",value:C.description,className:"mt-1 block w-full",onChange:t=>D("description",t.target.value),placeholder:"Enter description (optional)"}),e.jsx(g,{message:S.description,className:"mt-2"})]})]}),e.jsxs("div",{className:"mt-4 flex justify-end space-x-2",children:[e.jsx("button",{type:"button",onClick:Y,className:"bg-gray-100 px-4 py-2 text-gray-800 rounded shadow transition-all hover:bg-gray-200 text-sm",children:"Cancel"}),e.jsx("button",{type:"submit",className:"bg-emerald-500 px-4 py-2 text-white shadow transition-all hover:bg-emerald-600 text-sm",children:"Create Mutupo"})]})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg mb-6",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"search",value:"Search Mitupo"}),e.jsx(h,{id:"search",type:"text",value:a,className:"mt-1 block w-full",onChange:t=>w(t.target.value),placeholder:"Search by name or description..."})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"descriptionFilter",value:"Description Filter"}),e.jsxs("select",{id:"descriptionFilter",value:r,onChange:t=>k(t.target.value),className:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",children:[e.jsx("option",{value:"all",children:"All Mitupo"}),e.jsx("option",{value:"with",children:"With Description"}),e.jsx("option",{value:"without",children:"Without Description"})]})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"sortField",value:"Sort By"}),e.jsxs("select",{id:"sortField",value:x,onChange:t=>b(t.target.value),className:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",children:[e.jsx("option",{value:"name",children:"Name"}),e.jsx("option",{value:"description",children:"Description"}),e.jsx("option",{value:"created_at",children:"Created Date"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:M,className:"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded shadow transition-all text-sm w-full",children:"Clear Filters"})})]}),(a||r!=="all")&&e.jsx("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-sm",children:[e.jsx("span",{className:"text-blue-700 dark:text-blue-300 font-medium",children:"Active filters:"}),a&&e.jsxs("span",{className:"bg-blue-100 dark:bg-blue-800 text-blue-800 dark:text-blue-200 px-2 py-1 rounded-full text-xs",children:['Search: "',a,'"']}),r!=="all"&&e.jsx("span",{className:"bg-blue-100 dark:bg-blue-800 text-blue-800 dark:text-blue-200 px-2 py-1 rounded-full text-xs",children:r==="with"?"With Description":"Without Description"})]})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg",children:e.jsx("div",{className:"p-6 text-gray-900 dark:text-gray-100",children:v.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-gray-400 dark:text-gray-500 text-6xl mb-4",children:"ðŸ›ï¸"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-lg mb-4",children:c.length===0?"No mitupo found.":"No mitupo match your search criteria."}),c.length===0?e.jsx("button",{onClick:()=>u(!0),className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:"Add Your First Mutupo"}):e.jsx("button",{onClick:M,className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:"Clear Filters"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600",onClick:()=>N("name"),children:e.jsxs("div",{className:"flex items-center",children:["Mutupo Name",e.jsx(f,{field:"name"})]})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600",onClick:()=>N("description"),children:e.jsxs("div",{className:"flex items-center",children:["Description",e.jsx(f,{field:"description"})]})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600",onClick:()=>N("created_at"),children:e.jsxs("div",{className:"flex items-center",children:["Created Date",e.jsx(f,{field:"created_at"})]})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:v.map(t=>e.jsx("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:T===t.id?e.jsx("td",{colSpan:"4",className:"px-6 py-4",children:e.jsx("form",{onSubmit:s=>B(s,t),className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:`edit_name_${t.id}`,value:"Mutupo Name *"}),e.jsx(h,{id:`edit_name_${t.id}`,type:"text",value:_.name,className:"mt-1 block w-full",onChange:s=>y("name",s.target.value)}),e.jsx(g,{message:E.name,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:`edit_description_${t.id}`,value:"Description"}),e.jsx(h,{id:`edit_description_${t.id}`,type:"text",value:_.description,className:"mt-1 block w-full",onChange:s=>y("description",s.target.value)}),e.jsx(g,{message:E.description,className:"mt-2"})]}),e.jsxs("div",{className:"flex items-end space-x-2",children:[e.jsx("button",{type:"submit",className:"bg-blue-500 px-4 py-2 text-white rounded shadow transition-all hover:bg-blue-600 text-sm",children:"Update"}),e.jsx("button",{type:"button",onClick:U,className:"bg-gray-100 px-4 py-2 text-gray-800 rounded shadow transition-all hover:bg-gray-200 text-sm",children:"Cancel"})]})]})})}):e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:t.name})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"text-sm text-gray-900 dark:text-gray-100",children:t.description||e.jsx("span",{className:"text-gray-400 dark:text-gray-500 italic",children:"No description"})})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:new Date(t.created_at).toLocaleDateString()})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>R(t),className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300 transition-colors",children:"Edit"}),e.jsx(z,{href:route("mitupos.destroy",t.id),method:"delete",as:"button",className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 transition-colors",onClick:s=>{confirm("Are you sure you want to delete this mutupo?")||s.preventDefault()},children:"Delete"})]})})]})},t.id))})]})})})}),c.length>0&&e.jsx("div",{className:"mt-6 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-blue-800 dark:text-blue-300 font-semibold",children:["Showing ",v.length," of ",c.length," mitupo",a&&` matching "${a}"`]})}),e.jsxs("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:["Last updated: ",new Date().toLocaleDateString()]})]})})]})})]})}export{X as default};
